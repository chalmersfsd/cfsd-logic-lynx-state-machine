os: linux
language: cpp
sudo: required
branches:
  only:
  - "/^test.*$/"
  - "/^v[0-9].*$/"
services:
- docker
addons:
  apt:
    update: true
env:
  global:
  - DOCKERHUB='chalmersfsd'
  - IMAGE=`echo ${TRAVIS_REPO_SLUG#*/}`
  - secure: VO6kOrDLbAliuolwO/9FO29VuY0/OAurS2/4GjXW9sAIkZmC/zQfQOITRuh5ZnwhtV15q07f+qv9noX3Ijs3HDiM55VP+7OUr9wHSMt+z7W9/hUYAFRmY5//V1W5bnpUlxEQihTK67jU+1JkPSssaA8OVGeiy6+qoSzvfNSHdNrpuHZ4GZDYIqw9/BshXPAcknbj6YWFS85U7iOJ8Luz86seqCs+r6pcoxGPngcOXYoPZglwZwWcwnNOnVxtrZPKgOd6/OdLn1DUFOHiXRnN9WSpPghjAoeH445aHKXNfsMlAceMiE2wk0PuEgodvCyl/VrBduBNraBrDdwFkVIZTDtgiyL8WYeYJMYXx5qXrM0H2TuQ3N9mcbxJhdc7QISypjm9+WcsHAYUup46Luo9Vt2p0860cLsjNpNGayNEJqpYavXImNvu1cMG9/KGvCheIRL+9Sl0B1E90txouMLG+62nIPJ8Uh7U2x7ajWPUiVhFl3NKpbJ0lxYZUTAPGoZ7IiYOB8cQkIa9rRC81v/f7zg3P5Eg1hcdyINAc5csgh7b7j7KmR3qP7qAEclFMViBBTa2Rwfg8Ifmpv7hohleIawLh17sbv2IKaoa4t7EqjtlA8gdJwS5tN9eHjTPNt7hH173tDblZwHwJGgoMFohSJEgX2dAzu71u4IwKHRFrUg=
  - secure: NqTpQcOYb22IyS4rIxmww5KTlCoL8U5Bw7wWnvNtzCKQYZifjkxYEJbPfHXPo/2IyWgBFb7VMHIPT/9HLWcCZXpzICwy08XTWQeDzCDapW8iCBSmsWQVKTNc07TrOtMstdyFnheqT8inYvXIPy50XtNKcT31k33FgKCteMFJYR5han9z3c7zoEbfsrOfFa2ootsf8c8yG7lFCk/7iAj4zb4r9eq80k4wFO5bhmuDWLg3zElG+OEr0Ds2R/TNN/tU+stnjQxTcLd7r1KwAoQ+xjj+ZYzSXj09wW/aXFU4FxfBtiawEcR/+UWBVDpA30bzR8UUjyA9gwk+UehPb4MyD3ihq9b+q+a8siMd/gkBUUjw1z8AVzIF84cIodlM8UI5EiRShv72+NLPKMbqd5IHTAy2FthR1VWlgW+R+3omahOYd9conX76ZEQ6bYEsqCvNzIIAtdueNGhqsM5k8ExYerxqAShW17MXtwDdxqeuFM/Q91dYJNi03igxff8P5ZQPniSJCnO4+YED7nPA/BOjbr/X55KS7ZDxnb7U9jgOh485Z33/pGpSW4+IDMSH1qfY+PPwCnkEkzHY8dOQLPplHJj8kwTMehv7n+BGNu2DBAjSNnufx+OQ5c79SM6lWxg0gqtzTV2Kn/mqmhJvM4EmBlfO47l4R2Fx/vWM5iVH5cA=
install:
- docker build -f Dockerfile.amd64 -t ${IMAGE} .
script: skip
after_success:
- echo "$DOCKER_PASS" | docker login -u "$DOCKER_USER" --password-stdin
- if [[ "${TRAVIS_BRANCH}" == *test* ]]; then docker tag ${IMAGE} ${DOCKERHUB}/${IMAGE}:${TRAVIS_BRANCH}${TRAVIS_BUILD_NUMBER};
  docker push ${DOCKERHUB}/${IMAGE}:${TRAVIS_BRANCH}${TRAVIS_BUILD_NUMBER}; echo "${DOCKERHUB}/${IMAGE}:${TRAVIS_BRANCH}${TRAVIS_BUILD_NUMBER}";
  else docker tag ${IMAGE} ${DOCKERHUB}/${IMAGE}:${TRAVIS_BRANCH}; docker push ${DOCKERHUB}/${IMAGE}:${TRAVIS_BRANCH};
  echo "${DOCKERHUB}/${IMAGE}:${TRAVIS_BRANCH}"; fi
notifications:
  email:
    on_success: never
    on_failure: never
